1. 汇编指令格式
2. 生成汇编方法
3. 汇编常用指令讲解

# 汇编指令格式

汇编指令格式：

```
操作吗字段 地址吗字段
``` 

| 操作码字段 | 地址码字段    |       |
| --- |----------|-------|
| 操作码 | A1 A2 A3 | 三指令地址 |
| 操作码 | A1 A2    | 二指令地址 |
| 操作码 | A1       | 一指令地址 |
| 操作码 |         | 零指令地址   |

- **零指令地址**：只有操作码,没有地址码(空操作 停止等)
- **一指令地址**：指令编码中只有一个地址码,指出来参加操作的一个操作数的存储地址
  -     INC AL #自加指令 
- **二指令地址**：指令编码中有两个地址码,指出来参加操作的两个操作数的存储地址
  -  (op, a1, a2) a1和a2的操作结果放入a1中
  -     MOV AL, BL #移动指令
  -     ADD AL, 30 #加法指令 
- **三指令地址**：指令编码中有三个地址码,指出来参加操作的三个操作数的存储地址(考研少考)
  - (op, a1, a2, a3) a1和a2的操作结果放入a3中

# 生成汇编方法

`gcc -S -fverbose-asm main.cp`

1. -S：生成汇编代码。
2. -fverbose-asm：显示详细的汇编代码。



# 汇编常用指令讲解

## 数据定义指令

数据定义指令用来定义数据，包括数据类型、数据名称、数据值等。

### db、dw、dd、dq、dt、df

db、dw、dd、dq、dt、df 用来定义字节、字、双字、四字、多字、浮点数数据。

```
db 10, 20, 30, 40, 50
dw 100, 200, 300, 400, 500
dd 1000, 2000, 3000, 4000, 5000
dq 10000, 20000, 30000, 40000, 50000
dt 1.234, 2.345, 3.456, 4.567, 5.678
df 1.234, 2.345, 3.456, 4.567, 5.678
```

1. db：定义字节数据，可以指定多个字节数据，用逗号分隔。
2. dw：定义字数据，可以指定多个字数据，用逗号分隔。
3. dd：定义双字数据，可以指定多个双字数据，用逗号分隔。
4. dq：定义四字数据，可以指定多个四字数据，用逗号分隔。
5. dt：定义多字数据，可以指定多个多字数据，用逗号分隔。
6. df：定义浮点数数据，可以指定多个浮点数数据，用逗号分隔。

### equ

equ 用来定义常量。

```
equ 常量名 = 常量值
```

常量名：常量的名称。

常量值：常量的值。

```
equ PI = 3.1415926
```

### org

org 用来指定代码段的起始地址。

```
org 起始地址
```

起始地址：代码段的起始地址。

```
org 0x1000
```

## 算术指令

算术指令用来执行基本的算术运算。

### add、sub、mul、div、idiv

add、sub、mul、div、idiv 用来执行加、减、乘、除、整除运算。

```
add eax, ebx
sub eax, ebx
mul eax, ebx
div ebx
idiv ebx
```

1. add：加法运算。
2. sub：减法运算。
3. mul：乘法运算。
4. div：除法运算。
5. idiv：整除运算。

### inc、dec

inc、dec 用来执行自增、自减运算。

```
inc eax
dec ebx
```

1. inc：自增运算。
2. dec：自减运算。

## 逻辑指令

逻辑指令用来执行逻辑运算。

### and、or、xor、not

and、or、xor、not 用来执行与、或、异或、取反运算。

```
and eax, ebx
or eax, ebx
xor eax, ebx
not eax
```

1. and：与运算。
2. or：或运算。
3. xor：异或运算。
4. not：取反运算。

## 移位指令

移位指令用来执行移位运算。

### shl、shr、sal、sar

shl、shr、sal、sar 用来执行逻辑左移、逻辑右移、算术左移、算术右移运算。

```
shl eax, 1
shr ebx, 2
sal ecx, 3
sar edx, 4
```

1. shl：逻辑左移运算。
2. shr：逻辑右移运算。
3. sal：算术左移运算。
4. sar：算术右移运算。

## 控制指令

控制指令用来控制程序的执行流程。

### jmp、call、ret

jmp、call、ret 用来执行跳转、调用、返回指令。

```
jmp 目标地址
call 目标地址
ret
```

1. jmp：跳转指令。
2. call：调用指令。
3. ret：返回指令。

### int

int 用来执行中断。

```
int 3
```

int 3 用来执行系统调用。 

## 其他指令

其他指令用来实现一些特殊功能。

### db、dw、dd、dq、dt、df、equ、org、end

db、dw、dd、dq、dt、df、equ、org、end 用来定义数据、常量、代码段起始地址、代码段结束地址等。

```
db 10, 20, 30, 40, 50
dw 100, 200, 300, 400, 500
dd 1000, 2000, 3000, 4000, 5000
dq 10000, 20000, 30000, 40000, 50000
dt 1.234, 2.345, 3.456, 4.567, 5.678
df 1.234, 2.345, 3.456, 4.567, 5.678
equ PI = 3.1415926
org 0x1000
end
``` 

## 参考资料

1. [汇编指令格式](https://www.runoob.com/w3cnote/assembly-instruction-format.html)
2. [汇编指令详解](https://www.cnblogs.com/wupeiqi/p/10229922.html)    
3. [汇编指令集](https://www.cnblogs.com/wupeiqi/p/10229922.html)    
4. [汇编指令集](https://www.runoob.com/w3cnote/assembly-instruction-set.html)